Pig 提供了一个**基于 Hadoop 的并行地执行数据流处理的引擎**。它包含了一种脚本语言，称为Pig Latin，用来描述这些数据流。Pig Latin 本身提供了许多传统的数据操作（如join、sort、filter等），同时允许用户自己开发一些自定义函数用来读取、处理和写数据。

Pig运行于Hadoop之上，它同时使用到Hadoop分布式文件系统HDFS和Hadoop处理系统MapReduce。默认情况下，**Pig从HDFS中读取输入文件，使用HDFS来存放MapReduce任务所生成的中间数据，最终将输出写入HDFS中。**

## Pig的特点

- **丰富的运算符集** - 它提供了许多运算符来执行诸如join，sort，filer等操作。
- **易于编程** - Pig Latin与SQL类似，如果你善于使用SQL，则很容易编写Pig脚本。
- **优化机会** - Apache Pig中的任务自动优化其执行，因此程序员只需要关注语言的语义。
- **可扩展性** - 使用现有的操作符，用户可以开发自己的功能来读取、处理和写入数据。
- **用户定义函数** - Pig提供了在其他编程语言（如Java，python）中创建**用户定义函数**的功能，并且可以调用或嵌入到Pig脚本中。
- **处理各种数据** - Apache Pig分析各种数据，无论是结构化还是非结构化，它将结果存储在HDFS中。

## Pig VS MapReduce

|                             Pig                              |                      MapReduce                      |
| :----------------------------------------------------------: | :-------------------------------------------------: |
|                    Pig是一种数据流语言。                     |            MapReduce是一种数据处理模式。            |
|                     Pig是一种高级语言。                      |              MapReduce是低级和刚性的。              |
|                在Pig中执行Join操作非常简单。                 | 在MapReduce中执行数据集之间的Join操作是非常困难的。 |
|      任何具备SQL基础知识的新手都可以方便地使用Pig工作。      |           向Java公开是必须使用MapReduce。           |
|     Pig使用多查询方法，从而在很大程度上减少代码的长度。      |   MapReduce将需要几乎20倍的行数来执行相同的任务。   |
| 没有必要编译。执行时，每个Pig操作符都在内部转换为MapReduce作业。 |          MapReduce作业具有很长的编译过程。          |

## Pig VS SQL

| **Pig**                                                      | **SQL**                              |
| :----------------------------------------------------------- | ------------------------------------ |
| Pig Latin是一种**程序**语言。                                | SQL是一种**声明式**语言。            |
| **模式**是可选的。可以存储数据而无需设计模式（值存储为$ 01，$ 02等） | 模式是必需的。                       |
| Pig中的数据模型是**嵌套关系**。                              | SQL 中使用的数据模型是**平面关系**。 |
| Pig为**查询优化**提供有限的机会。                            | 在SQL中有更多的机会进行查询优化。    |

除了上面的区别，Apache Pig Latin:

- 允许在pipeline（流水线）中拆分。
- 允许开发人员在pipeline中的任何位置存储数据。
- 声明执行计划。
- 提供运算符来执行ETL（Extract提取，Transform转换和Load加载）功能。

## Pig VS Hive

Pig和Hive都用于创建MapReduce作业。在某些情况下，Hive以与Pig类似的方式在HDFS上运行。

|                             Pig                              |                             Hive                             |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| Pig使用一种名为 **Pig Latin** 的语言（最初创建于 **Yahoo** ）。 | Hive使用一种名为 **HiveQL** 的语言（最初创建于 **Facebook** ）。 |
|                 Pig Latin是一种数据流语言。                  |                  HiveQL是一种查询处理语言。                  |
|         Pig Latin是一个过程语言，它适合流水线范式。          |                   HiveQL是一种声明性语言。                   |
|         Pig可以处理结构化，非结构化和半结构化数据。          |                   Hive主要用于结构化数据。                   |

## 应用场景

### 传统的抽取转换加载（ETL）数据流

对原始日志进行数据清洗，之后进行简单的聚合预计算，然后导入数据仓库中。

### 原生数据研究

因为Pig在无模式，模式信息不全，或者模式不一致的情况下进行操作，同时因为Pig可以很容易的控制封装的数据，因此对于那些期望在数据没有进行清洗也没有写入数据仓库的情况下，分析数据的研究人员经常偏好于使用Pig。

### 迭代处理

