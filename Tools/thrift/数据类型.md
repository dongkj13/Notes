## 简单的数据类型:

| 名称   | 简介           |
| ------ | -------------- |
| byte   | 有符号字节     |
| i16    | 16位有符号整数 |
| i32    | 32位有符号整数 |
| i64    | 64位有符号整数 |
| double | 64位浮点数     |
| string | 字符串类型     |

thrift不支持无符号数据类型。

## 容器类型: (支持泛型)

- list: 表示一系列T类型的数据组成的有序列表，元素可以重复
- set: 一系列T类型的数据组合成的无序集合，元素不重复
- map: 一个字典结构，key为K类型，value为V类型，相当于java中的hashmap

## 结构体(struct)

这个struct类似C语言中的结构体，初衷也是将不同的数据聚合在一起，方便传输，经过编译器编译完成后其实就是java中的类

```thrift
struct Student{
    1: string name;
    2: i32 age;
    3: list<string> friends_name,
    4: map<string, age> friends_age,
}
```

## 枚举类型(enum)

```
enum Gender{
    MALE = 0,
    FEMALE = 1,
}
```

## 异常类型(exception)

 thrift 支持异常类型表示服务端和客户端之间的通信所可能抛出来的异常，并且我们可以在service中的方法上throws 异常，用描述异常出现的时间，异常的类型

```thrift
exception RequestException{
    1: i32 code
    2: string reason
}
```

## 服务类型 (service)

服务端和客户端通信使用到的接口，就好比java中的接口，它是一系列方法的集合，thrift 会将service转换成客户端和服务端的框架的代码，定义形式如下

```thrift
service MyService{
    string ask(1:string name, 2:i32 age)
}
```

## 类型定义(typedef)

可以像下面这样，使用类似C语言的语法为变量取别名，转换成我们习惯的命名格式

```thrift
typedef i32 int
typedef i64 long
```

## 常量类型(const)

thrift 同样支持常量的定义，使用const关键字：

```thrift
const string NAME="XXX"
```

## 命名空间类型(namespace)

关键字是 namespace，thrift的命名空间相当于java中的package，实际使用上thrift也会将生成的代码放在这下面指定的包中。

```thrift
格式: namespace 语言  路径
实例: namespace java com.changwu.thrift.Demo
在路径./gen-java/com/changwu/thrift/Demo/下生成代码
```

## 文件包含(include)

 同样向C/C++那样，支持文件之间相互包含的操作。在java中这个动作就是Import。

```thrift
include "global.thrift"
```

## 注释

thrift 中的注释有一下几种

```thrift
// XXXX
#  XXX
/*XXX*/
```

## 可选和必填的选项(required/optional)

关键字分别是 required 和 optional，分别表示对应的字段是必填的还是可选的，默认是必填的。

```thrift
struct Student{
    1: required string name;
    2: optional string age;
}
```

## 参考

- [Apache Thrift 的魅力](https://www.cnblogs.com/ZhuChangwu/p/11976677.html)

